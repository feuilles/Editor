function post(t,e,n){$(".nav-spin").show().spin("small","#333");var i=$.post(t,e);return i.always(function(){$(".nav-spin").spin(!1).hide()}),i.done(function(t){try{var t=JSON.parse(t)}catch(e){var t=t}n(null,t)}),i.fail(function(t){try{var t=JSON.parse(t.responseText)}catch(e){var t=t.responseText}n(!0,t)}),!1}function notify(t){$notification=$("#notification"),$notification.find("p").html(t),$("#notification").miniNotification({showSpeed:300,time:2e3})}$(".dropdown-toggle").dropdown(),$(".btn-tooltip").tooltip();var href=window.location.href;/console\/doc\/write\/id/.exec(href)&&($('[data-route="/console/doc/write/id/:id"]').show(),editor.init()),$("body").on("click",".editor-modal-close",function(t){return t.preventDefault(),$(".editor-modal").modal("hide"),!1}),/console\/docs/.exec(href)&&($('[data-route="/console/docs"]').show(),$(".actions-own").each(function(){var t=$(this).attr("data-related-sha");$(this).html($('[data-actions-own-sha="'+t+'"]').html())}),$(".actions-collaborate").each(function(){var t=$(this).attr("data-related-sha");$(this).html($('[data-actions-collaborate-sha="'+t+'"]').html())}),$(".actions-invited").each(function(){var t=$(this).attr("data-related-sha");$(this).html($('[data-actions-invited-sha="'+t+'"]').html())}),$(".actions-archives").each(function(){var t=$(this).attr("data-related-sha");$(this).html($('[data-actions-archives-sha="'+t+'"]').html())})),$("body").on("click",".update-status",function(t){t.preventDefault(),$this=$(this);var e={sha:$this.attr("data-doc-sha"),status:$this.attr("data-status-id")};return post(urls.api.doc.status.update,e,function(t,n){return t?(notify(n.message),void 0):($('[data-doc-status="'+e.sha+'"]').text($this.text()),notify(n.message),void 0)}),!1});var $formExport=!1;$("body").on("click",".btn-export",function(t){t.preventDefault(),$formExport=$(this).closest("form");var e=$("#export-options").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("body").on("click",".pick-format",function(t){return t.preventDefault(),$(".editor-modal").modal("hide"),$formExport.remove('[name="format"]'),$formExport.append('<input type="hidden" name="format" value="'+$(this).attr("data-format")+'">'),$formExport.submit(),!1});var $leaveForm=!1;$("body").on("submit",'[name="leave"]',function(t){t.preventDefault(),$leaveForm=$(this);var e=$("#leave-modal").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("body").on("click",".leave-nope",function(t){return t.preventDefault(),$leaveForm=!1,$(".editor-modal").modal("hide"),!1}),$("body").on("click",".leave-yep",function(t){return t.preventDefault(),$(".editor-modal").modal("hide"),$(".nav-spin").show().spin("small","#333"),$.post($leaveForm.attr("action"),$leaveForm.serialize(),function(t,e,n){return $(".nav-spin").spin(!1).hide(),200!==n.status?(notify(t.message),void 0):(notify(t.message),$leaveForm.closest(".the-grid-collaborate").fadeOut(function(){$(this).remove(),$(".the-grid-collaborate").length||$(".collab-none").show()}),void 0)}),!1}),$("body").on("click","#new-document",function(t){t.preventDefault();var e=$("#new-document-wrapper").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),setTimeout(function(){$('.editor-modal [name="title"]').focus()},10),!1}),$("body").on("click","#import-document",function(t){t.preventDefault();var e=$("#import-document-wrapper").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),$('.editor-modal [name="title"]').focus(),!1}),$(".drop-item-active").find(".dropdown-item-active").show(),$("body").on("click",".docs-toggle",function(t){return t.preventDefault(),$this=$(this),$this.is(":checked")?$($this.attr("data-toggle-related")).fadeIn():$($this.attr("data-toggle-related")).fadeOut(),!1}),$("body").on("click","#new-collection",function(t){t.preventDefault();var e=$("#new-collection-wrapper").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("body").on("click","#new-template",function(t){t.preventDefault();var e=$("#new-template-wrapper").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("#editor-save-options").popover({placement:"bottom",container:".console-nav",html:!0,content:$(".the-save-options").html()}),kDown.whenShortcut("cmd+s",function(t){return t.preventDefault(),editor.save(),!1}),$("body").on("click",".editor-save",function(t){return t.preventDefault(),editor.save(),!1}),kDown.whenShortcut("cmd+shift+s",function(t){t.preventDefault();var e=$("#note-container").html(),n=$("#ok-submit-container").html();return $(".editor-modal .modal-content").html(e+n),$(".editor-modal").modal("show"),!1}),$("body").on("click",".editor-modal #update-doc",function(t){t.preventDefault();var e=$('.editor-modal [name="note"]').val();return $(".editor-modal").modal("hide"),editor.save({note:e}),!1}),$("body").on("click",".editor-save-with-note",function(t){t.preventDefault();var e=$("#note-container").html(),n=$("#ok-submit-container").html();return $(".editor-modal .modal-content").html(e+n),$(".editor-modal").modal("show"),!1}),$("body").on("click","#publish-on-github",function(t){t.preventDefault();var e=$("#publish-on-github-container").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("body").on("click","#publish-on-wordpress",function(t){t.preventDefault();var e=$("#publish-on-wordpress-container").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("body").on("click","#publish-on-dropbox",function(t){t.preventDefault();var e=$("#publish-on-dropbox-container").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("body").on("click",".btn-inhouse",function(t){t.preventDefault();var e=$(this).attr("data-related-container"),n=$('[data-container="'+e+'"]').html();return $(".editor-modal .modal-content").html(n),$(".editor-modal").modal("show"),!1}),$("body").on("click",".published a",function(t){return t.preventDefault(),$(".published-list").fadeToggle(200),!1}),$("body").on("click","#toggle-collaborators",function(t){t.preventDefault();var e=$("#add-collaborator-wrapper").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("body").on("click","#view-versions",function(t){t.preventDefault();var e=$("#versions-container").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("body").on("click","#view-activity",function(t){t.preventDefault();var e=$("#activity-container").html();return $(".editor-modal .modal-content").html(e),$(".editor-modal").modal("show"),!1}),$("body").on("click",".btn-close-modal",function(t){return t.preventDefault(),$(".editor-modal").modal("hide"),!1}),$(".action-messages").addClass("js-action-messages"),setTimeout(function(){$(".js-action-messages").fadeOut()},3e3),$(function(){return $.miniNotification=function(t,e){var n,i,o,r,s,a,l=this;return this.defaults={position:"top",show:!0,effect:"slide",opacity:.95,time:4e3,showSpeed:600,hideSpeed:450,showEasing:"",hideEasing:"",innerDivClass:"inner",closeButton:!1,closeButtonText:"close",closeButtonClass:"close",hideOnClick:!0,onLoad:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){}},s="",this.settings={},this.$element=$(t),r=function(t){return s=t},i=function(){var t,e;return e="slide"===l.getSetting("effect")?0-l.$element.outerHeight():0,t={},"bottom"===l.getSetting("position")?t.bottom=e:t.top=e,"fade"===l.getSetting("effect")&&(t.opacity=0),t},o=function(){var t;return t={opacity:l.getSetting("opacity")},"bottom"===l.getSetting("position")?t.bottom=0:t.top=0,t},a=function(){return l.$elementInner=$("<div />",{"class":l.getSetting("innerDivClass")}),l.$element.wrapInner(l.$elementInner)},n=function(){var t;return t=$("<a />",{"class":l.getSetting("closeButtonClass"),html:l.getSetting("closeButtonText")}),l.$element.children().append(t),t.bind("click",function(){return l.hide()})},this.getState=function(){return s},this.getSetting=function(t){return this.settings[t]},this.callSettingFunction=function(e){return this.settings[e](t)},this.init=function(){var t=this;return r("hidden"),this.settings=$.extend({},this.defaults,e),this.$element.length&&(a(),this.getSetting("closeButton")&&n(),this.$element.css(i()).css({display:"inline"}),this.getSetting("show")&&this.show(),this.getSetting("hideOnClick"))?this.$element.bind("click",function(){return"hiding"!==t.getState()?t.hide():void 0}):void 0},this.show=function(){var t=this;return"showing"!==this.getState()&&"visible"!==this.getState()?(r("showing"),this.callSettingFunction("onLoad"),this.$element.animate(o(),this.getSetting("showSpeed"),this.getSetting("showEasing"),function(){return r("visible"),t.callSettingFunction("onVisible"),setTimeout(function(){return t.hide()},t.settings.time)})):void 0},this.hide=function(){var t=this;return"hiding"!==this.getState()&&"hidden"!==this.getState()?(r("hiding"),this.callSettingFunction("onHide"),this.$element.animate(i(),this.getSetting("hideSpeed"),this.getSetting("hideEasing"),function(){return r("hidden"),t.callSettingFunction("onHidden")})):void 0},this.init(),this},$.fn.miniNotification=function(t){return this.each(function(){var e;return e=$(this).data("miniNotification"),void 0===e?(e=new $.miniNotification(this,t),$(this).data("miniNotification",e)):e.show()})}}),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var o=["opacity",e,~~(100*t),n,i].join("-"),r=.01+100*(n/i),s=Math.max(1-(1-t)/e*(100-r),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[o]||(f.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",f.cssRules.length),d[o]=1),o}function i(t,e){var n,i,o=t.style;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;u.length>i;i++)if(n=u[i]+e,void 0!==o[n])return n;return void 0!==o[e]?e:void 0}function o(t,e){for(var n in e)t.style[i(t,n)||n]=e[n];return t}function r(t){for(var e=1;arguments.length>e;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function a(t){this.opts=r(t||{},a.defaults,p)}function l(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}f.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,i){function r(){return o(n("group",{coordsize:u+" "+u,coordorigin:-c+" "+-c}),{width:u,height:u})}function a(t,a,l){e(f,e(o(r(),{rotation:360/i.lines*t+"deg",left:~~a}),e(o(n("roundrect",{arcsize:i.corners}),{width:c,height:i.width,left:i.radius,top:-i.width>>1,filter:l}),n("fill",{color:s(i.color,t),opacity:i.opacity}),n("stroke",{opacity:0}))))}var l,c=i.length+i.width,u=2*c,d=2*-(i.width+i.length)+"px",f=o(r(),{position:"absolute",top:d,left:d});if(i.shadow)for(l=1;i.lines>=l;l++)a(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;i.lines>=l;l++)a(l);return e(t,f)},a.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&o.childNodes.length>e+i&&(o=o.childNodes[e+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var c,u=["webkit","Moz","ms","O"],d={},f=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};a.defaults={},r(a.prototype,{spin:function(e){this.stop();var n=this,i=n.opts,r=n.el=o(t(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex});if(i.radius+i.length+i.width,o(r,{left:i.left,top:i.top}),e&&e.insertBefore(r,e.firstChild||null),r.setAttribute("role","progressbar"),n.lines(r,n.opts),!c){var s,a=0,l=(i.lines-1)*(1-i.direction)/2,u=i.fps,d=u/i.speed,f=(1-i.opacity)/(d*i.trail/100),p=d/i.lines;!function h(){a++;for(var t=0;i.lines>t;t++)s=Math.max(1-(a+(i.lines-t)*p)%d*f,i.opacity),n.opacity(r,t*i.direction+l,s,i);n.timeout=n.el&&setTimeout(h,~~(1e3/u))}()}return n},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,r){function a(e,n){return o(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*u+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var l,u=0,d=(r.lines-1)*(1-r.direction)/2;r.lines>u;u++)l=o(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&n(r.opacity,r.trail,d+u*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(l,o(a("#000","0 0 4px #000"),{top:"2px"})),e(i,e(l,a(s(r.color,u),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){t.childNodes.length>e&&(t.childNodes[e].style.opacity=n)}});var h=o(t("group"),{behavior:"url(#default#VML)"});return!i(h,"transform")&&h.adj?l():c=i(h,"animation"),a}),function(t){if("object"==typeof exports)t(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],t);else{if(!window.Spinner)throw Error("Spin.js not present");t(window.jQuery,window.Spinner)}}(function(t,e){t.fn.spin=function(n,i){return this.each(function(){var o=t(this),r=o.data();r.spinner&&(r.spinner.stop(),delete r.spinner),n!==!1&&(n=t.extend({color:i||o.css("color")},t.fn.spin.presets[n]||n),r.spinner=new e(n).spin(this))})},t.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}});